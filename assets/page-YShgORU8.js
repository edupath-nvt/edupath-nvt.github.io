import{$ as P,c as q,r as V,M as y,j as t,F as n,I as G,G as J,R as $,bD as A,C as K,bE as N}from"./index--sDKw4iC.js";import{b as Q,C as U}from"./index.esm-BXmE5tW1.js";import{C as X}from"./center-BEB29hLp.js";import{M as Y}from"./index-omTyajLE.js";const Z=P(e=>({msg:[],setMsg:o=>{Array.isArray(o)?e({msg:o}):e(b=>({msg:o(b.msg)}))}}));function fe(){const e=q.c(48),{control:o,handleSubmit:b,setValue:M,formState:B}=Q(),{isSubmitting:T,isValid:H}=B,_=V.useRef(null),{msg:s,setMsg:W}=Z();let r;e[0]!==s||e[1]!==W||e[2]!==M?(r=async L=>{M("message","");const O=[...s,{role:"user",content:L.message}];W(O)},e[0]=s,e[1]=W,e[2]=M,e[3]=r):r=e[3];let j;e[4]!==b||e[5]!==r?(j=b(r),e[4]=b,e[5]=r,e[6]=j):j=e[6];const D=j;let v;e[7]===Symbol.for("react.memo_cache_sentinel")?(v=()=>{_.current&&(_.current.scrollTop=_.current.scrollHeight)},e[7]=v):v=e[7];let S;e[8]!==s?(S=[s],e[8]=s,e[9]=S):S=e[9],V.useEffect(v,S);let i;e[10]!==s.length?(i=s.length!==0&&{opacity:0,transition:"all 0.1s"},e[10]=s.length,e[11]=i):i=e[11];let l;e[12]!==i?(l={inset:0,transition:"all 1s ease",transformOrigin:"bottom right",zIndex:-1,...i},e[12]=i,e[13]=l):l=e[13];let a;e[14]!==s.length?(a=s.length===0&&{"&::after":{content:`"${y("Hello, I'm Edubot!")}"`,position:"absolute",left:"75%",maxWidth:150,width:"max-content",bgcolor:le,borderRadius:1,border:1,borderColor:"divider",px:1,py:.5}},e[14]=s.length,e[15]=a):a=e[15];let c;e[16]!==a?(c={animation:"bounce 1.2s infinite",position:"relative",width:.45,...a},e[16]=a,e[17]=c):c=e[17];let w;e[18]===Symbol.for("react.memo_cache_sentinel")?(w=t.jsx(n,{component:"img",height:1,src:"/assets/images/edubot.webp"}),e[18]=w):w=e[18];let m;e[19]!==c?(m=t.jsx(n,{sx:c,children:w}),e[19]=c,e[20]=m):m=e[20];let u;e[21]!==m||e[22]!==l?(u=t.jsx(X,{position:"absolute",sx:l,children:m}),e[21]=m,e[22]=l,e[23]=u):u=e[23];let R;e[24]===Symbol.for("react.memo_cache_sentinel")?(R={display:"flex",flexDirection:"column",position:"absolute",inset:0,overflow:"auto",gap:2},e[24]=R):R=e[24];let f;e[25]!==s?(f=s.map(se),e[25]=s,e[26]=f):f=e[26];let p;e[27]!==f?(p=t.jsx(n,{ref:_,sx:R,children:f}),e[27]=f,e[28]=p):p=e[28];let d;e[29]!==u||e[30]!==p?(d=t.jsxs(n,{flex:1,position:"relative",mb:2,children:[u,p]}),e[29]=u,e[30]=p,e[31]=d):d=e[31];let C;e[32]===Symbol.for("react.memo_cache_sentinel")?(C={p:2,bgcolor:te,borderRadius:2,gap:1,display:"flex",width:1},e[32]=C):C=e[32];let I;e[33]===Symbol.for("react.memo_cache_sentinel")?(I={required:!0},e[33]=I):I=e[33];let x;e[34]!==o?(x=t.jsx(U,{control:o,name:"message",defaultValue:"",rules:I,render:ee}),e[34]=o,e[35]=x):x=e[35];const F=!H;let k,z;e[36]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsx(G,{icon:"mingcute:send-fill"}),z=y("Send"),e[36]=k,e[37]=z):(k=e[36],z=e[37]);let h;e[38]!==T||e[39]!==F?(h=t.jsx(J,{disabled:F,type:"submit",color:"primary",variant:"contained",loading:T,startIcon:k,children:z}),e[38]=T,e[39]=F,e[40]=h):h=e[40];let g;e[41]!==D||e[42]!==x||e[43]!==h?(g=t.jsxs(n,{component:"form",onSubmit:D,sx:C,children:[x,h]}),e[41]=D,e[42]=x,e[43]=h,e[44]=g):g=e[44];let E;return e[45]!==d||e[46]!==g?(E=t.jsxs(n,{position:"relative",flex:1,display:"flex",flexDirection:"column",children:[d,g]}),e[45]=d,e[46]=g,e[47]=E):E=e[47],E}function ee(e){const{field:o}=e;return t.jsx(N,{size:"small",multiline:!0,sx:{flex:1},...o,placeholder:y("Type your message")})}function te(e){return e.vars.palette.background.paper}function se(e){return t.jsx(n,{sx:{width:"max-content",bgcolor:ie,py:1,px:2,borderRadius:2,maxWidth:"calc(90% - 48px)",boxShadow:re,...e.role==="user"&&{alignSelf:"end",bgcolor:ne,color:oe},...e.role==="assistant"&&{ml:"48px",position:"relative","&::before":{content:'""',height:40,width:40,backgroundImage:"url(/assets/images/edubot.webp)",backgroundSize:"cover",position:"absolute",left:-48,bottom:0}},"& p":{m:0},"& p + p":{mt:1}},children:e.role==="assistant"?e.content?e.content.startsWith("[")?e.content.startsWith("[Lá»—i")?t.jsx(K,{color:"error",children:e.content}):t.jsxs($,{gap:.5,py:1,children:[t.jsx(A,{size:16,color:"inherit"})," ",y("Function call...")]}):t.jsx(Y,{children:e.content}):t.jsxs($,{gap:.5,py:1,children:[t.jsx(A,{size:16,color:"inherit"})," ",y("Loading...")]}):e.content},e.content)}function oe(e){return e.vars.palette.primary.contrastText}function ne(e){return e.vars.palette.primary.main}function re(e){return e.vars.customShadows.z12}function ie(e){return e.vars.palette.background.neutral}function le(e){return e.vars.palette.background.paper}export{fe as default};
