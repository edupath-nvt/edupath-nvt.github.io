import{az as L,c as A,ao as P,aR as q,ap as I,r as R,j as s,x as C,R as T,aC as k,_ as $}from"./index-BSBhKTDu.js";import{T as B,C as D}from"./index-C6IBB6DN.js";import{c as V,a as W,C as w,T as Z}from"./index.esm-Pd2MG9ve.js";import{P as z,A as G}from"./password-field-ErS4i6D8.js";import{t as E}from"./index-CUAR1jDN.js";import{B as N}from"./Button-kH2WcNPv.js";import"./getReactElementRef-BLH3ikv_.js";import"./Zoom-DU1F_pc2.js";const l=V();async function O(e){return L.post("/login",e,{withCredentials:!0}).then(t=>{localStorage.setItem("accessToken",t.data.accessToken),E.success(t.data.msg)}).catch(t=>{if(E.error(t.response.data.msg),t.response.status===422)for(const[o,r]of Object.entries(t.response.data.fields))l.setError(o,{type:"manual",message:r[0]});throw t})}function H(){const e=A.c(21);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={control:l.control},e[0]=t):t=e[0];const{isLoading:o,isSubmitSuccessful:r}=W(t),[a]=P();let n;e[1]!==a?(n=a.get("redirect"),e[1]=a,e[2]=n):n=e[2];const i=n,{setAuth:c}=q(),m=I();let u,d;e[3]!==r||e[4]!==i||e[5]!==m||e[6]!==c?(u=()=>{r&&(L.get("/api/me").then(F=>{c(F.data),l.reset()}),m.replace(i??"/"))},d=[r,i,m,c],e[3]=r,e[4]=i,e[5]=m,e[6]=c,e[7]=u,e[8]=d):(u=e[7],d=e[8]),R.useEffect(u,d);let f,h;e[9]===Symbol.for("react.memo_cache_sentinel")?(f={gap:1.5,display:"flex",flexDirection:"column",alignItems:"center",mb:5},h=s.jsx(C,{variant:"h3",children:"Sign in"}),e[9]=f,e[10]=h):(f=e[9],h=e[10]);let x;e[11]===Symbol.for("react.memo_cache_sentinel")?(x={color:"text.secondary"},e[11]=x):x=e[11];let p;e[12]===Symbol.for("react.memo_cache_sentinel")?(p=s.jsxs(T,{sx:f,children:[h,s.jsxs(C,{variant:"body2",sx:x,children:["Donâ€™t have an account?",s.jsx(k,{component:$,href:"/sign-up",variant:"subtitle2",sx:{ml:.5},children:"Get started"})]})]}),e[12]=p):p=e[12];let g,_;e[13]===Symbol.for("react.memo_cache_sentinel")?(g=l.handleSubmit(O),_={display:"flex",alignItems:"flex-end",flexDirection:"column"},e[13]=g,e[14]=_):(g=e[13],_=e[14]);let b;e[15]===Symbol.for("react.memo_cache_sentinel")?(b={value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"},e[15]=b):b=e[15];let S;e[16]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(w,{control:l.control,name:"email",defaultValue:"",rules:{pattern:b,required:"Email is required.",maxLength:{value:250,message:"Email maximum length is 250 characters."}},render:K}),e[16]=S):S=e[16];let y;e[17]===Symbol.for("react.memo_cache_sentinel")?(y=s.jsx(w,{control:l.control,name:"password",defaultValue:"",rules:{required:"Password is required.",maxLength:{value:250,message:"Password maximum length is 250 characters."}},render:J}),e[17]=y):y=e[17];let j;e[18]===Symbol.for("react.memo_cache_sentinel")?(j={mb:-2},e[18]=j):j=e[18];let v;return e[19]!==o?(v=s.jsxs(G,{children:[p,s.jsxs(T,{component:"form",noValidate:!0,onSubmit:g,sx:_,children:[S,y,s.jsx(N,{loading:o,fullWidth:!0,size:"large",type:"submit",color:"inherit",variant:"contained",sx:j,children:"Login account"})]})]}),e[19]=o,e[20]=v):v=e[20],v}function J(e){const{field:t,fieldState:o}=e,{invalid:r,error:a}=o;return s.jsx(z,{...t,required:!0,fullWidth:!0,error:r,helperText:a==null?void 0:a.message,name:"password",label:"Password",sx:{mb:3}})}function K(e){const{field:t,fieldState:o}=e,{invalid:r,error:a}=o;return s.jsx(Z,{...t,required:!0,error:r,helperText:a==null?void 0:a.message,fullWidth:!0,label:"Email address",sx:{mb:3}})}function ae(){const e=A.c(1);let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsxs(s.Fragment,{children:[s.jsx(B,{children:`Sign in - ${D.appName}`}),s.jsx(H,{})]}),e[0]=t):t=e[0],t}export{ae as default};
