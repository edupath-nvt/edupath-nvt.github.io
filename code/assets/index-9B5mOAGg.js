import{aP as E,a9 as T,c as L,az as F,b7 as q,aA as I,r as k,j as s,B as w,Y as A,aT as R,a4 as $,a3 as B}from"./index-Bstsoh_D.js";import{T as D,C as V}from"./index-BAmrZsh4.js";import{c as W,a as Z,C,T as z}from"./index.esm-Dcoymsfo.js";import{P as G,A as N}from"./password-field-qzDFBU_s.js";import"./InputAdornment-BpPgg7Vc.js";const n=W();async function O(e){return E.post("/login",e,{withCredentials:!0}).then(t=>{localStorage.setItem("accessToken",t.data.accessToken),T.success(t.data.msg)}).catch(t=>{if(T.error(t.response.data.msg),t.response.status===422)for(const[l,r]of Object.entries(t.response.data.fields))n.setError(l,{type:"manual",message:r[0]});throw t})}function H(){const e=L.c(21);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={control:n.control},e[0]=t):t=e[0];const{isLoading:l,isSubmitSuccessful:r}=Z(t),[a]=F();let o;e[1]!==a?(o=a.get("redirect"),e[1]=a,e[2]=o):o=e[2];const i=o,{setAuth:c}=q(),m=I();let u,d;e[3]!==r||e[4]!==i||e[5]!==m||e[6]!==c?(u=()=>{r&&(E.get("/api/me").then(P=>{c(P.data),n.reset()}),m.replace(i??"/"))},d=[r,i,m,c],e[3]=r,e[4]=i,e[5]=m,e[6]=c,e[7]=u,e[8]=d):(u=e[7],d=e[8]),k.useEffect(u,d);let f,h;e[9]===Symbol.for("react.memo_cache_sentinel")?(f={gap:1.5,display:"flex",flexDirection:"column",alignItems:"center",mb:5},h=s.jsx(w,{variant:"h3",children:"Sign in"}),e[9]=f,e[10]=h):(f=e[9],h=e[10]);let x;e[11]===Symbol.for("react.memo_cache_sentinel")?(x={color:"text.secondary"},e[11]=x):x=e[11];let p;e[12]===Symbol.for("react.memo_cache_sentinel")?(p=s.jsxs(A,{sx:f,children:[h,s.jsxs(w,{variant:"body2",sx:x,children:["Donâ€™t have an account?",s.jsx(R,{component:$,href:"/sign-up",variant:"subtitle2",sx:{ml:.5},children:"Get started"})]})]}),e[12]=p):p=e[12];let g,b;e[13]===Symbol.for("react.memo_cache_sentinel")?(g=n.handleSubmit(O),b={display:"flex",alignItems:"flex-end",flexDirection:"column"},e[13]=g,e[14]=b):(g=e[13],b=e[14]);let _;e[15]===Symbol.for("react.memo_cache_sentinel")?(_={value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"},e[15]=_):_=e[15];let S;e[16]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(C,{control:n.control,name:"email",defaultValue:"",rules:{pattern:_,required:"Email is required.",maxLength:{value:250,message:"Email maximum length is 250 characters."}},render:J}),e[16]=S):S=e[16];let y;e[17]===Symbol.for("react.memo_cache_sentinel")?(y=s.jsx(C,{control:n.control,name:"password",defaultValue:"",rules:{required:"Password is required.",maxLength:{value:250,message:"Password maximum length is 250 characters."}},render:Y}),e[17]=y):y=e[17];let j;e[18]===Symbol.for("react.memo_cache_sentinel")?(j={mb:-2},e[18]=j):j=e[18];let v;return e[19]!==l?(v=s.jsxs(N,{children:[p,s.jsxs(A,{component:"form",noValidate:!0,onSubmit:g,sx:b,children:[S,y,s.jsx(B,{loading:l,fullWidth:!0,size:"large",type:"submit",color:"inherit",variant:"contained",sx:j,children:"Login account"})]})]}),e[19]=l,e[20]=v):v=e[20],v}function Y(e){const{field:t,fieldState:l}=e,{invalid:r,error:a}=l;return s.jsx(G,{...t,required:!0,fullWidth:!0,error:r,helperText:a==null?void 0:a.message,name:"password",label:"Password",sx:{mb:3}})}function J(e){const{field:t,fieldState:l}=e,{invalid:r,error:a}=l;return s.jsx(z,{...t,required:!0,error:r,helperText:a==null?void 0:a.message,fullWidth:!0,label:"Email address",sx:{mb:3}})}function ee(){const e=L.c(1);let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsxs(s.Fragment,{children:[s.jsx(D,{children:`Sign in - ${V.appName}`}),s.jsx(H,{})]}),e[0]=t):t=e[0],t}export{ee as default};
